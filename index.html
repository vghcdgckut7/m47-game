<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–ú–∞—Å—Ç–µ—Ä—Å–∫–∞—è 47: –¶–µ–Ω—Ç—Ä</title>
    <style>
        :root { --p1-color: #00ffcc; --p2-color: #ff00ff; --blue: #58a6ff; --gold: #ffd700; }
        body { margin: 0; background: #05070a; color: white; font-family: monospace; overflow: hidden; }

        /* –ì–õ–ê–ó –ù–ê –°–¢–ê–†–¢–ï */
        #start { position: fixed; inset: 0; background: #05070a; z-index: 1000; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        .eye { width: 80px; height: 40px; border: 3px solid var(--blue); border-radius: 100% 0; transform: rotate(45deg); margin-bottom: 20px; box-shadow: 0 0 15px var(--blue); position: relative; }
        .eye::after { content: ''; position: absolute; width: 15px; height: 15px; background: white; border-radius: 50%; top: 25%; left: 25%; }

        /* –û–ö–ù–û –ò–ì–†–´ */
        #game-window { width: 100vw; height: 45vh; background: #0d1117; display: flex; align-items: center; overflow: hidden; position: relative; border-bottom: 3px solid var(--blue); }
        
        /* –¢–†–ï–ö –° –ì–†–ò–î–ê–ú–ò –î–õ–Ø –¢–û–ß–ù–û–°–¢–ò */
        #track { 
            display: grid; 
            grid-auto-flow: column; 
            grid-auto-columns: 80px; 
            gap: 10px; 
            padding: 0 50vw; 
            transition: transform 0.5s ease-in-out; 
            align-items: center; 
            height: 100%;
        }
        
        .tile { 
            width: 80px; height: 80px; background: #161b22; border: 2px solid #30363d; border-radius: 12px;
            display: flex; flex-direction: column; align-items: center; justify-content: center; 
            font-size: 1.2rem; color: var(--blue); font-weight: bold; position: relative;
        }
        .tile.finish { border-color: var(--gold); color: var(--gold); box-shadow: 0 0 15px var(--gold); }
        .tile.plus { border-color: #238636; color: #238636; }
        .tile.minus { border-color: #da3633; color: #da3633; }

        /* –§–ò–®–ö–ò - –¢–ï–ü–ï–†–¨ –°–¢–†–û–ì–û –í –¶–ï–ù–¢–†–ï */
        .pawn { 
            width: 44px; height: 44px; position: absolute; border-radius: 10px; border: 2px solid #fff;
            display: flex; align-items: center; justify-content: center; font-weight: bold; z-index: 100;
            transition: all 0.4s cubic-bezier(0.18, 0.89, 0.32, 1.28);
            left: 0; /* –ë—É–¥–µ—Ç –º–µ–Ω—è—Ç—å—Å—è —á–µ—Ä–µ–∑ JS */
        }
        #p1-pawn { background: var(--p1-color); color: #000; top: 15%; box-shadow: 0 0 15px var(--p1-color); }
        #p2-pawn { background: var(--p2-color); color: #fff; bottom: 15%; box-shadow: 0 0 15px var(--p2-color); }

        /* –ò–ù–¢–ï–†–§–ï–ô–° */
        #ui { height: 55vh; background: #1c2128; display: flex; flex-direction: column; align-items: center; justify-content: space-around; padding: 15px; box-sizing: border-box; }
        .stats { display: flex; width: 100%; justify-content: space-around; font-weight: bold; }
        .cube-wrap { width: 100px; height: 100px; background: #05070a; border: 4px solid var(--blue); border-radius: 20px; display: flex; align-items: center; justify-content: center; font-size: 4rem; }
        
        button { border: none; padding: 20px; color: white; border-radius: 15px; font-weight: bold; font-size: 1.5rem; width: 90%; cursor: pointer; }
        button:disabled { opacity: 0.5; }
        input { padding: 12px; border-radius: 8px; margin: 5px; border: 2px solid var(--blue); background: #161b22; color: white; text-align: center; width: 80%; }
    </style>
</head>
<body>

    <div id="start">
        <div class="eye"></div>
        <h2 style="color:var(--blue)">–ú–ê–°–¢–ï–†–°–ö–ê–Ø 47</h2>
        <input type="text" id="p1Name" placeholder="–ú–ò–†–û–•–û–î–ï–¶ 1">
        <input type="text" id="p2Name" placeholder="–ú–ò–†–û–•–û–î–ï–¶ 2">
        <button style="background: var(--blue);" onclick="ready()">–ü–û–î–ö–õ–Æ–ß–ò–¢–¨–°–Ø</button>
    </div>

    <div id="game-window">
        <div id="track">
            <div id="p1-pawn" class="pawn">1</div>
            <div id="p2-pawn" class="pawn">2</div>
        </div>
    </div>

    <div id="ui">
        <div class="stats">
             <div style="color:var(--p1-color)"><span id="n1">P1</span>: <span id="s1">0</span></div>
             <div id="msg">–í–ê–® –•–û–î</div>
             <div style="color:var(--p2-color)"><span id="n2">P2</span>: <span id="s2">0</span></div>
        </div>
        <div class="cube-wrap" id="cube">?</div>
        <button id="rollBtn" onclick="move()">–ë–†–û–°–ò–¢–¨ –ö–£–ë–ò–ö</button>
    </div>

    <script>
        let pos = [0, 0];
        let turn = 0;
        let names = ["P1", "P2"];
        let mods = {};
        const TILE_W = 80; // –¢–æ—á–Ω–∞—è —à–∏—Ä–∏–Ω–∞ –ø–ª–∏—Ç–∫–∏
        const GAP = 10;    // –¢–æ—á–Ω—ã–π –æ—Ç—Å—Ç—É–ø –º–µ–∂–¥—É –Ω–∏–º–∏
        const STEP = TILE_W + GAP; // –®–∞–≥ –≤ –ø–∏–∫—Å–µ–ª—è—Ö

        function buildTrack() {
            const track = document.getElementById('track');
            for(let i=0; i<=100; i++) {
                const t = document.createElement('div');
                t.className = 'tile';
                if (i === 100) {
                    t.classList.add('finish');
                    t.innerText = 'üèÜ';
                } else if (i > 0 && Math.random() < 0.2) {
                    const m = [1, 4, -1, -4][Math.floor(Math.random()*4)];
                    mods[i] = m;
                    t.classList.add(m > 0 ? 'plus' : 'minus');
                    t.innerHTML = `${i}<br><small>${m>0?'+':''}${m}</small>`;
                } else {
                    t.innerText = i;
                }
                track.appendChild(t);
            }
        }

        function ready() {
            names[0] = document.getElementById('p1Name').value || "–ò–ì–†–û–ö 1";
            names[1] = document.getElementById('p2Name').value || "–ò–ì–†–û–ö 2";
            document.getElementById('n1').innerText = names[0];
            document.getElementById('n2').innerText = names[1];
            document.getElementById('p1-pawn').innerText = names[0][0].toUpperCase();
            document.getElementById('p2-pawn').innerText = names[1][0].toUpperCase();
            buildTrack();
            document.getElementById('start').style.display = 'none';
            sync();
        }

        function sync() {
            const btn = document.getElementById('rollBtn');
            const color = turn === 0 ? 'var(--p1-color)' : 'var(--p2-color)';
            
            document.getElementById('msg').innerText = "–•–û–î: " + names[turn];
            document.getElementById('msg').style.color = color;
            btn.style.background = color;
            document.getElementById('cube').style.borderColor = color;

            // –ö–∞–º–µ—Ä–∞ - —Å–º–µ—â–µ–Ω–∏–µ –Ω–∞ –∏–Ω–¥–µ–∫—Å –ø–ª–∏—Ç–∫–∏ * (—à–∏—Ä–∏–Ω–∞ + –æ—Ç—Å—Ç—É–ø)
            const offset = pos[turn] * STEP;
            document.getElementById('track').style.transform = `translateX(${-offset}px)`;
            
            // –§–∏—à–∫–∏ - —Ç–µ–ø–µ—Ä—å –∏—Ö –ø–æ–∑–∏—Ü–∏—è —Å—á–∏—Ç–∞–µ—Ç—Å—è –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ç–æ—á–Ω–æ
            // –î–æ–±–∞–≤–ª—è–µ–º 18px –¥–ª—è –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏–∏ –æ—Ç—Å—Ç—É–ø–∞ –∏ —Ü–µ–Ω—Ç—Ä–æ–≤–∫–∏ –≤–Ω—É—Ç—Ä–∏ –ø–ª–∏—Ç–∫–∏ 80px
            document.getElementById('p1-pawn').style.left = (pos[0] * STEP + 18) + "px";
            document.getElementById('p2-pawn').style.left = (pos[1] * STEP + 18) + "px";
            
            document.getElementById('s1').innerText = pos[0];
            document.getElementById('s2').innerText = pos[1];
        }

        async function move() {
            const btn = document.getElementById('rollBtn');
            if(btn.disabled) return;
            btn.disabled = true;

            let r = Math.floor(Math.random() * 6) + 1;
            const cube = document.getElementById('cube');
            
            for(let i=0; i<10; i++) {
                cube.innerText = Math.floor(Math.random() * 6) + 1;
                await new Promise(res => setTimeout(res, 60));
            }
            cube.innerText = r;
            await new Promise(res => setTimeout(res, 300));

            for(let i=0; i<r; i++) {
                if(pos[turn] < 100) {
                    pos[turn]++;
                    sync();
                    await new Promise(res => setTimeout(res, 200));
                }
            }

            if(mods[pos[turn]]) {
                document.getElementById('msg').innerText = "–ú–û–î–ò–§–ò–ö–ê–¢–û–†!";
                await new Promise(res => setTimeout(res, 500));
                pos[turn] += mods[pos[turn]];
                if(pos[turn] < 0) pos[turn] = 0;
                if(pos[turn] > 100) pos[turn] = 100;
                sync();
            }

            if(pos[turn] >= 100) {
                alert("üèÜ –ü–û–ë–ï–î–ê: " + names[turn]);
                location.reload();
                return;
            }

            turn = (turn === 0) ? 1 : 0;
            sync();
            btn.disabled = false;
        }
    </script>
</body>
</html>
